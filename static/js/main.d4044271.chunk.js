(this["webpackJsonphexagon-game"]=this["webpackJsonphexagon-game"]||[]).push([[0],{33:function(e,t,n){e.exports=n(86)},37:function(e,t,n){},38:function(e,t,n){},86:function(e,t,n){"use strict";n.r(t);var r,a=n(4),i=n.n(a),u=n(29),l=n.n(u),o=(n(37),n(38),n(32)),s=n(17),c=n(30),m=n(31),d=n(9),y=n(18);!function(e){e[e.Empty=0]="Empty",e[e.PlayerA=1]="PlayerA",e[e.PlayerB=2]="PlayerB",e[e.DominatedA=3]="DominatedA",e[e.DominatedB=4]="DominatedB",e[e.Draw=5]="Draw"}(r||(r={}));var h=function(e){switch(e){case r.Empty:return"#FCDC5F";case r.PlayerA:return"#D2111B";case r.PlayerB:return"#3F48CC";case r.DominatedA:return"#F8A7AB";case r.DominatedB:return"#CACDF0"}},v=function(e){return i.a.createElement("span",{style:{color:h(e)}},e===r.PlayerA?"Red":"Blue")},f=function(e){return e.state===r.Empty},b=function(e){return![r.PlayerA,r.PlayerB].includes(e.state)},B=function(e,t){return{q:e.q+t.q,r:e.r+t.r}},p=[{q:-1,r:0},{q:0,r:-1},{q:1,r:-1},{q:1,r:0},{q:0,r:1},{q:-1,r:1}],A=function(){function e(t){Object(c.a)(this,e),this.board=void 0,this.turnPlayer=void 0,this.turnMove=void 0,this.turnNumber=void 0,this[y.a]=!0;var n=2*t-1;this.board=[];for(var a=0;a<n;a+=1)this.board.push(Array(n).fill({state:r.Empty,visibleA:0,visibleB:0}));this.turnPlayer=r.PlayerA,this.turnMove=1,this.turnNumber=1}return Object(m.a)(e,[{key:"at",value:function(e){return console.assert(this.inBounds(e)),this.board[e.r][e.q]}},{key:"inBounds",value:function(e){return e.q>=0&&e.r>=0&&e.q+e.r>=this.sideLen-1&&e.q<this.diamLen&&e.r<this.diamLen&&e.r+e.q<this.diamLen+this.sideLen-1}},{key:"move",value:function(e){return Object(y.b)(this,(function(t){t.board[e.r][e.q]={state:t.turnPlayer};var n,a=Object(s.a)(p);try{for(a.s();!(n=a.n()).done;)for(var i=n.value,u=B(e,i);t.inBounds(u)&&b(t.at(u));)t.board[u.r][u.q]=t.dominator(u),u=B(u,i)}catch(l){a.e(l)}finally{a.f()}1===t.turnMove&&t.turnNumber>1?t.turnMove+=1:(t.turnMove=1,t.turnPlayer=t.turnPlayer===r.PlayerA?r.PlayerB:r.PlayerA,t.turnNumber+=1)}))}},{key:"dominator",value:function(e){var t,n=0,a=0,i=Object(s.a)(p);try{for(i.s();!(t=i.n()).done;)for(var u=t.value,l=e;l=B(l,u),this.inBounds(l);){if(this.at(l).state===r.PlayerA){n+=1;break}if(this.at(l).state===r.PlayerB){a+=1;break}}}catch(o){i.e(o)}finally{i.f()}return{state:n===a?r.Empty:n>a?r.DominatedA:r.DominatedB,visibleA:n,visibleB:a}}},{key:"countScores",value:function(){for(var e=0,t=0,n=0;n<this.diamLen;n+=1)for(var a=0;a<this.diamLen;a+=1){var i={q:a,r:n};this.inBounds(i)&&(this.at(i).state===r.DominatedA?e+=1:this.at(i).state===r.DominatedB&&(t+=1))}return{playerA:e,playerB:t}}},{key:"sideLen",get:function(){return Math.ceil(this.board.length/2)}},{key:"diamLen",get:function(){return this.board.length}}]),e}(),E=function(){var e=Object(a.useState)((function(){return new A(6)})),t=Object(o.a)(e,2),n=t[0],u=t[1],l=30*Math.sqrt(3),s=l/2,c=n.countScores(),m=r.Empty;n.board.some((function(e,t){return e.some((function(e,r){return n.inBounds({q:r,r:t})&&f(e)}))}))||(m=c.playerA===c.playerB?r.Draw:c.playerA>c.playerB?r.PlayerA:r.PlayerB);var y=n.diamLen*l,B=y+60,p=30*n.diamLen*1.5+60,E=B/2-y/2+s;return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",null,"Board size: ",i.a.createElement("input",{type:"number",min:1,value:n.sideLen,onChange:function(e){return u(new A(Number(e.target.value)))}})),i.a.createElement("div",null,"Turn ",n.turnNumber,", move ",n.turnMove,"."," ",v(r.PlayerA)," has ",c.playerA," fields. ",v(r.PlayerB)," has ",c.playerB," fields."," ",i.a.createElement("button",{onClick:function(){return u(new A(n.sideLen))}},"Reset")),i.a.createElement("div",null,m===r.Empty?i.a.createElement(i.a.Fragment,null,v(n.turnPlayer)," player's turn."):m===r.Draw?i.a.createElement(i.a.Fragment,null,"Draw."):i.a.createElement(i.a.Fragment,null,"Player ",v(m)," won.")),i.a.createElement("div",{style:{margin:"auto",width:"max-content"}},i.a.createElement(d.Stage,{width:B,height:p},i.a.createElement(d.Layer,null,n.board.flatMap((function(e,t){var r=(n.sideLen-1)*s,a=t*s-r;return e.flatMap((function(e,r){var o={q:r,r:t};if(!n.inBounds(o))return[];var c=E+a+l*r,m=52.5+45*t;return[i.a.createElement(d.RegularPolygon,{sides:6,radius:30,fill:h(e.state),stroke:"black",strokeWidth:1,x:c,y:m,key:"".concat(r,"_").concat(t),onClick:function(e){0===e.evt.button&&f(n.at(o))&&u((function(e){return e.move(o)}))}}),b(e)&&e.visibleA-e.visibleB!==0&&i.a.createElement(d.Text,{text:Math.abs(e.visibleA-e.visibleB).toString(),x:c-s,y:m-30,width:l,height:60,align:"center",verticalAlign:"middle",fontSize:24,key:"".concat(r,"_").concat(t,"_text"),listening:!1})]}))}))))))},P=function(){return i.a.createElement("div",{className:"App"},i.a.createElement(E,null))};l.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(P,null)),document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.d4044271.chunk.js.map